
<html>
  <head>
    <title>Cheshire Configuration Files</title>
  </head>
  
  <body bgcolor = white>
    <center><h3>Cheshire Main Configuration</h3></center>
    <p>
      [ <a href = "config.html">Up to the contents</a> ] [ <a href = "config-explain.html">On to Explain</a> ]
    <p>
      <img src= "closed.gif"><b>dbconfig</b><br>
      This tag is the top level tag which contains all the definitions for the particular set of indexes. One dbconfig should be used per file, and contain only information about a single database -- as the indexing command processes everything in the configfile.

    <p>
      <img src = "closed.gif"><b>dbenv</b><br>
      This is where the database system keeps its cross database files which allow it to handle serving data at the same time as reindexing (among other things). This can and should be the same location for all cheshire databases running on the system. Under the setup explained previously this is (home)/cheshire/default, and thus looks something like:
<br>
<code>
&lt;dbenv&gt; /home/cheshire/cheshire/default &lt;/dbenv&gt;
</code>

    <p>
      <img src = "closed.gif"><b>filedef</b><br>
      Filedef is the main definition of a set of indexes, formats and so forth. Clusters, as described below, use a second filedef tag within the one dbconfig file. It has one attribute, 'type'. This can have one of the following values:
    <table border = 1>
      <tr><td>SGML</td><td>The data is in SGML format</td></tr>
      <tr><td>MARC</td><td>The data is in (US)MARC sgml format (and can hence be returned in MARC after transformation)</td></tr>
      <tr><td>CLUSTER</td><td>The data is a Cluster definition</td></tr>
      <tr><td>AUTH</td><td>The data is ? Z39.50 Authentication records ?</td></tr>
      <tr><td>LCTREE</td><td>The data is ? Library of Congress ?</td></tr>
      <tr><td>MAPPED</td><td>The SGML is a map of how to access non SGML data</td></tr>
      <tr><td>SQL, DBMS or RDBMS</td><td>Externally managed databases via Z39.50</td></tr>
    </table>
    <p>    
    The most common then is SGML, and the tag generally looks like:
    <br>
    <code>
      &lt;filedef type=SGML&gt;
    </code>
<p>
     <img src = "closed.gif"><b>defaultpath</b><br>
       This tag contains a default path which will be prepended to all filenames in the document that is not already a full path. It must be the field directly after the filedef tag.<p>
<code>&lt;defaultpath&gt; /home/cheshire/cheshire/quickstep/ &lt;/defaultpath&gt;</code>
    <p>
      <img src = "closed.gif"><b>filetag</b><br>
      The filetag tag contains the name of the database that is configured in this filedef. This is what needs to be passed as the database in a z39.50 query, or in the CHESHIRE_DATABASE variable for a local search - but more on the client side <a href = "scripts.html">later</a>. Suffice to say that this is what distinguishes this database from the others on your system, and hence needs to be unique.<br>
      You need to also put this into the /etc/zserver.conf file to have the database available via z39.50 - see the information in the <a href = "setup.html#zserverconf">initial setup</a> document.
      <p>
      If we call the database teidocs, because it contains documents in the TEI DTD, the tag would look like:<br>
      <code>&lt;filetag&gt; teidocs &lt;/filetag&gt;</code>
						    <p>
      There are, currently, two reserved names. 'metadata' is used to retreive metadata about the database, and 'IR-Explain-1' is the Z39.50 name for the metadata database about all databases on the system. Further documentation on the metadata database will be forthcoming.


<p>
      <img src = "closed.gif"><b>filename</b><br>
      This tag contains the path to the data that you wish to index. It can either have a filename in it, which has all the documents one after the other, or it can contain a directory. If it has a directory, then all the files in it to be processed need to be listed afterwards in 'filecont' tags. See below.
      <p>
      If there is one monolithic file to be indexed, then the tag might look like:<br>
      <code>&lt;filename&gt; /home/cheshire/cheshire/teidocs/DATA/alldocuments.sgml &lt;/filename&gt;</code>
    <br>
      If there are multiple files, then it would simply remove the '/alldocuments.sgml' from the end.
    <p>
      <img src = "closed.gif"><b>filecont</b><br>
      The filecont tag is only used if the filename tag above contains a directory. Each filecont tag will contain the path to one file within the above directory. Normally, however, the full path is in the tag as it is automatically generated by the 'buildassoc' program. Although it is unnecessary, it is still valid to have only 1 filecont tag, which makes globally usable script writing easier.<br>
      Filecont has 3 attributes; ID, which is an id for the file; MIN, which stores the lowest document ID in the file; and MAX which stores the highest document ID in the file.<br>
      Note that after any filecont fields comes the explain section if present. This is documented in <a href = "config-explain.html">the next section</a>.<p>								  
      An example:<br>
      <code>&lt;filecont id=1 min=1 max=5&gt; /home/cheshire/cheshire/teidocs/DATA/docs1-5.sgml &lt;/filecont&gt;</code>
    <p>
      <img src = "closed.gif"><b>filedtd</b><br>
      Filedtd contains the path to the DTD for the sgml to be indexed. Cheshire wants the full DOCTYPE tag, and hence if this is not supplied it is necessary to create a wrapper file. This file would have just one line and look something like:<br>
      <code> &lt;DOCTYPE EAD SYSTEM "/home/cheshire/cheshire/default/dtds/ead.dtd" []&gt;</code>
    <p>
      The corresponding filedtd tag might then be:<br>
      <code>&lt;filedtd&gt; /home/cheshire/cheshire/default/dtds/ead.wrapper &lt;/filedtd&gt;</code>
    <p>
      <img src="closed.gif"><b>sgmlcat</b><br>
      Sgmlcat contains the path to the SGML catalog file, which needs to have the public identifiers for the DTDs that you use and so forth.  This should be something like:<br>
<code>&lt;sgmlcat&gt; /home/cheshire/cheshire/default/catalog &;lt;/sgmlcat&gt; </code>
<p>
Note well that this catalog should contain an entry pointing to the default sgml declaration. You can find this file in the docs directory in the cheshire source code. The line in the catalog file should look something like:<br>
<code>SGMLDECL "/home/cheshire/cheshire/default/default_sgml_dcl"</code>

    <p>
      <img src = "closed.gif"><b>assocfil</b><br>
      This tag contains the associator file for the data. This file is generated by the buildassoc program, and defaults to the filename or the directory name with '.assoc' appended. For ease, it's useful to keep this named after the name of the database. So for the teidocs database this could be:<br>
<code>&lt;assocfil&gt; /home/cheshire/cheshire/teidocs/teidocs.assoc &lt;/assocfil&gt;</code>
    <p>
      <img src = "closed.gif"><b>history</b><br>
      The history tag contains the path to the history file for the database.  This never appears to be used, so don't worry about what it actually is. It should look something like:<br>
<code>&lt;history&gt; /home/cheshire/cheshire/teidocs/teidocs.history &lt;/history&gt;</code>
    <p>
      <hr>


</body>
</html>
